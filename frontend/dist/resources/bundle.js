(()=>{"use strict";var e={221:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;var a=function(){function e(){}return e.prototype.update=function(e){this.lastUpdate=e},Object.defineProperty(e.prototype,"id",{get:function(){return this.lastUpdate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sections",{get:function(){return this.lastUpdate.sections},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeRemaining",{get:function(){return this.lastUpdate.timeEnd-(new Date).getUTCSeconds()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageURL",{get:function(){return this.lastUpdate.gameOptions.imageURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageSplit",{get:function(){return this.lastUpdate.gameOptions.imageSplit},enumerable:!1,configurable:!0}),e}();t.Game=a},551:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Lobby=void 0;var i=a(221),n=function(){function e(){this.gameMasterIsYou=!1,this._game=new i.Game}return e.prototype.update=function(e){var t=this;e.players.forEach((function(e){e.isYou&&(t.gameMasterIsYou=e.isGameMaster)})),this.lastUpdate=e,this._game.update(e.gameStateUpdate)},Object.defineProperty(e.prototype,"players",{get:function(){return this.lastUpdate.players},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gameTime",{get:function(){return this.lastUpdate.gameOptions.gameTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allowImageUploads",{get:function(){return this.lastUpdate.gameOptions.allowImageUploads},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageURL",{get:function(){return this.lastUpdate.gameOptions.imageURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"game",{get:function(){return this._game},enumerable:!1,configurable:!0}),e.prototype.canStartLobby=function(){var e=this.lastUpdate.players.length;return this.gameMasterIsYou&&e>=2},e.prototype.getPlayer=function(e){for(var t=0,a=this.players;t<a.length;t++){var i=a[t];if(i.id==e)return i}},e.prototype.start=function(){return[!0,""]},e.prototype.uploadSection=function(){},e}();t.Lobby=n},753:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UiManager=void 0;var a=function(){function e(e){this.lobby=e,this.playersList=document.getElementById("playersList"),this.gameTime=document.getElementById("gameTime"),this.allowUploads=document.getElementById("allowUploads"),this.lobbyImage=document.getElementById("lobbyImage"),this.startLobby=document.getElementById("startLobby"),this.sectionsList=document.getElementById("sectionsList"),this.gameImage=document.getElementById("gameImage"),this.imageUpload=document.getElementById("imageUpload"),this.uploadImage=document.getElementById("uploadImage"),this.stitchedImage=document.getElementById("stitchedImage"),this.returnToLobby=document.getElementById("returnToLobby"),this.startLobby.onclick=function(){e.start()}}return e.prototype.update=function(){var e=this,t=this.lobby;this.gameTime.innerText=this.toMinutesAndSeconds(t.gameTime),this.allowUploads.innerText=t.allowImageUploads?"yes":"no",this.lobbyImage.src=t.imageURL,this.startLobby.hidden=!t.canStartLobby(),this.gameImage.src=t.game.imageURL,this.playersList.innerHTML="",t.players.forEach((function(t){var a;(a=document.createElement("li")).innerText=t.name,t.isGameMaster&&a.classList.add("gameMaster"),t.isYou&&a.classList.add("you"),e.playersList.appendChild(a)}));var a=t.game.sections;this.sectionsList.innerHTML="",a.forEach((function(a){var i=document.createElement("li"),n=t.getPlayer(a.playerId);i.innerText=n.name+" "+(a.submitted?"submitted":"not submitted"),e.sectionsList.appendChild(i)}))},e.prototype.toMinutesAndSeconds=function(e){var t=Math.floor(e/60);return t+":"+(""+(e-60*t)).padStart(2,"0")},e}();t.UiManager=a},607:(e,t,a)=>{var i=a(551),n=a(753),o={};location.search.substr(1).split("&").forEach((function(e){o[e.split("=")[0]]=e.split("=")[1]})),o.l;var r=new i.Lobby,s=new n.UiManager(r);r.update({players:[{name:"bobby",id:"1234",isGameMaster:!0,isYou:!0},{name:"alex",id:"5678",isGameMaster:!1,isYou:!1}],gameOptions:{gameTime:3e3,allowImageUploads:!0,imageSplit:"horizontal",imageURL:"https://www.image.com/myImage.png"},lobbyOptions:{maxPlayers:16,lobbyLocked:!1},gameStateUpdate:{id:"asdf123",gameOptions:{gameTime:3e3,allowImageUploads:!0,imageSplit:"horizontal",imageURL:"https://www.image.com/myImage.png"},timeCreation:(new Date).getUTCSeconds(),timeEnd:(new Date).getUTCSeconds()+1e3,sections:[{x:0,y:0,width:400,height:300,playerId:"1234",submitted:!0},{x:0,y:300,width:400,height:300,playerId:"5678",submitted:!1}]}}),s.update()}},t={};!function a(i){if(t[i])return t[i].exports;var n=t[i]={exports:{}};return e[i](n,n.exports,a),n.exports}(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ib3hkcmF3Ly4vc3JjL0dhbWUudHMiLCJ3ZWJwYWNrOi8vYm94ZHJhdy8uL3NyYy9Mb2JieS50cyIsIndlYnBhY2s6Ly9ib3hkcmF3Ly4vc3JjL1VpTWFuYWdlci50cyIsIndlYnBhY2s6Ly9ib3hkcmF3Ly4vc3JjL2luZGV4LnRzIiwid2VicGFjazovL2JveGRyYXcvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYm94ZHJhdy93ZWJwYWNrL3N0YXJ0dXAiXSwibmFtZXMiOlsidXBkYXRlIiwiZ2FtZVVwZGF0ZSIsInRoaXMiLCJsYXN0VXBkYXRlIiwiaWQiLCJzZWN0aW9ucyIsInRpbWVFbmQiLCJEYXRlIiwiZ2V0VVRDU2Vjb25kcyIsImdhbWVPcHRpb25zIiwiaW1hZ2VVUkwiLCJpbWFnZVNwbGl0IiwiR2FtZSIsImdhbWVNYXN0ZXJJc1lvdSIsIl9nYW1lIiwiaW5mbyIsInBsYXllcnMiLCJmb3JFYWNoIiwicGxheWVyIiwiaXNZb3UiLCJpc0dhbWVNYXN0ZXIiLCJnYW1lU3RhdGVVcGRhdGUiLCJnYW1lVGltZSIsImFsbG93SW1hZ2VVcGxvYWRzIiwiY2FuU3RhcnRMb2JieSIsIm51bWJlck9mUGxheWVycyIsImxlbmd0aCIsImdldFBsYXllciIsInN0YXJ0IiwidXBsb2FkU2VjdGlvbiIsIkxvYmJ5IiwibG9iYnkiLCJwbGF5ZXJzTGlzdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJhbGxvd1VwbG9hZHMiLCJsb2JieUltYWdlIiwic3RhcnRMb2JieSIsInNlY3Rpb25zTGlzdCIsImdhbWVJbWFnZSIsImltYWdlVXBsb2FkIiwidXBsb2FkSW1hZ2UiLCJzdGl0Y2hlZEltYWdlIiwicmV0dXJuVG9Mb2JieSIsIm9uY2xpY2siLCJpbm5lclRleHQiLCJ0b01pbnV0ZXNBbmRTZWNvbmRzIiwic3JjIiwiaGlkZGVuIiwiZ2FtZSIsImlubmVySFRNTCIsImVsIiwiY3JlYXRlRWxlbWVudCIsIm5hbWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsInNlY3Rpb24iLCJwbGF5ZXJJZCIsInN1Ym1pdHRlZCIsInNlY29uZHMiLCJtaW4iLCJNYXRoIiwiZmxvb3IiLCJwYWRTdGFydCIsIlVpTWFuYWdlciIsInF1ZXJ5RGljdCIsImxvY2F0aW9uIiwic2VhcmNoIiwic3Vic3RyIiwic3BsaXQiLCJpdGVtIiwidWlNYW5hZ2VyIiwibG9iYnlPcHRpb25zIiwibWF4UGxheWVycyIsImxvYmJ5TG9ja2VkIiwidGltZUNyZWF0aW9uIiwieCIsInkiLCJ3aWR0aCIsImhlaWdodCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIl0sIm1hcHBpbmdzIjoicUdBR0EsK0JBZ0JBLE9BYkksWUFBQUEsT0FBQSxTQUFPQyxHQUNIQyxLQUFLQyxXQUFhRixHQUd0QixzQkFBSSxpQkFBRSxDLElBQU4sV0FBVyxPQUFPQyxLQUFLQyxXQUFXQyxJLGdDQUNsQyxzQkFBSSx1QkFBUSxDLElBQVosV0FBaUIsT0FBT0YsS0FBS0MsV0FBV0UsVSxnQ0FFeEMsc0JBQUksNEJBQWEsQyxJQUFqQixXQUNJLE9BQU9ILEtBQUtDLFdBQVdHLFNBQVUsSUFBSUMsTUFBT0MsaUIsZ0NBR2hELHNCQUFJLHVCQUFRLEMsSUFBWixXQUFpQixPQUFPTixLQUFLQyxXQUFXTSxZQUFZQyxVLGdDQUNwRCxzQkFBSSx5QkFBVSxDLElBQWQsV0FBbUIsT0FBT1IsS0FBS0MsV0FBV00sWUFBWUUsWSxnQ0FDMUQsRUFoQkEsR0FBYSxFQUFBQyxRLDhFQ0FiLGFBRUEsYUFLSSxhQUNJVixLQUFLVyxpQkFBa0IsRUFDdkJYLEtBQUtZLE1BQVEsSUFBSSxFQUFBRixLQXNEekIsT0FuRFcsWUFBQVosT0FBUCxTQUFjZSxHQUFkLFdBQ0lBLEVBQUtDLFFBQVFDLFNBQVEsU0FBQUMsR0FDYkEsRUFBT0MsUUFDUCxFQUFLTixnQkFBa0JL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RzNDLElBQUlDLEVBQVNKLEVBQXlCRSxHQUFZLENBR2pEQyxRQUFTLElBT1YsT0FIQUUsRUFBb0JILEdBQVVFLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9DRyxFQUFPRCxRQ2xCZkYsQ0FBb0IsTSIsImZpbGUiOiJyZXNvdXJjZXMvYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtHYW1lU3RhdGVVcGRhdGV9IGZyb20gXCIuL0dhbWVTdGF0ZVVwZGF0ZVwiO1xyXG5pbXBvcnQge1NlY3Rpb259IGZyb20gXCIuL1NlY3Rpb25cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHYW1lIHtcclxuICAgIGxhc3RVcGRhdGU6IEdhbWVTdGF0ZVVwZGF0ZTtcclxuICAgIFxyXG4gICAgdXBkYXRlKGdhbWVVcGRhdGUgOiBHYW1lU3RhdGVVcGRhdGUpIHtcclxuICAgICAgICB0aGlzLmxhc3RVcGRhdGUgPSBnYW1lVXBkYXRlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBnZXQgaWQoKSB7IHJldHVybiB0aGlzLmxhc3RVcGRhdGUuaWQ7IH1cclxuICAgIGdldCBzZWN0aW9ucygpIHsgcmV0dXJuIHRoaXMubGFzdFVwZGF0ZS5zZWN0aW9uczsgfVxyXG4gICAgXHJcbiAgICBnZXQgdGltZVJlbWFpbmluZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sYXN0VXBkYXRlLnRpbWVFbmQgLSBuZXcgRGF0ZSgpLmdldFVUQ1NlY29uZHMoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2V0IGltYWdlVVJMKCkgeyByZXR1cm4gdGhpcy5sYXN0VXBkYXRlLmdhbWVPcHRpb25zLmltYWdlVVJMOyB9XHJcbiAgICBnZXQgaW1hZ2VTcGxpdCgpIHsgcmV0dXJuIHRoaXMubGFzdFVwZGF0ZS5nYW1lT3B0aW9ucy5pbWFnZVNwbGl0OyB9XHJcbn0iLCJpbXBvcnQge1BsYXllcn0gZnJvbSBcIi4vUGxheWVyXCI7XHJcbmltcG9ydCB7TG9iYnlTdGF0ZVVwZGF0ZX0gZnJvbSBcIi4vTG9iYnlTdGF0ZVVwZGF0ZVwiO1xyXG5pbXBvcnQge1NlY3Rpb259IGZyb20gXCIuL1NlY3Rpb25cIjtcclxuaW1wb3J0IHtHYW1lfSBmcm9tIFwiLi9HYW1lXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTG9iYnkge1xyXG4gICAgcHJpdmF0ZSBsYXN0VXBkYXRlIDogTG9iYnlTdGF0ZVVwZGF0ZTtcclxuICAgIHByaXZhdGUgZ2FtZU1hc3RlcklzWW91IDogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgX2dhbWU6IEdhbWU7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZU1hc3RlcklzWW91ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fZ2FtZSA9IG5ldyBHYW1lKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyB1cGRhdGUoaW5mbyA6IExvYmJ5U3RhdGVVcGRhdGUpIDogdm9pZCB7XHJcbiAgICAgICAgaW5mby5wbGF5ZXJzLmZvckVhY2gocGxheWVyID0+IHtcclxuICAgICAgICAgICAgaWYgKHBsYXllci5pc1lvdSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lTWFzdGVySXNZb3UgPSBwbGF5ZXIuaXNHYW1lTWFzdGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5sYXN0VXBkYXRlID0gaW5mbztcclxuICAgICAgICB0aGlzLl9nYW1lLnVwZGF0ZShpbmZvLmdhbWVTdGF0ZVVwZGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHBsYXllcnMoKSA6IFBsYXllcltdIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sYXN0VXBkYXRlLnBsYXllcnM7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGdldCBnYW1lVGltZSgpIDogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sYXN0VXBkYXRlLmdhbWVPcHRpb25zLmdhbWVUaW1lO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBnZXQgYWxsb3dJbWFnZVVwbG9hZHMoKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxhc3RVcGRhdGUuZ2FtZU9wdGlvbnMuYWxsb3dJbWFnZVVwbG9hZHM7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGdldCBpbWFnZVVSTCgpIDogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sYXN0VXBkYXRlLmdhbWVPcHRpb25zLmltYWdlVVJMO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBnZXQgZ2FtZSgpIDogR2FtZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dhbWU7XHJcbiAgICB9XHJcblxyXG4gICAgY2FuU3RhcnRMb2JieSgpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgbnVtYmVyT2ZQbGF5ZXJzID0gdGhpcy5sYXN0VXBkYXRlLnBsYXllcnMubGVuZ3RoO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdhbWVNYXN0ZXJJc1lvdSAmJiBudW1iZXJPZlBsYXllcnMgPj0gMjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2V0UGxheWVyKGlkIDogc3RyaW5nKSA6IFBsYXllciB7XHJcbiAgICAgICAgZm9yIChsZXQgcGxheWVyIG9mIHRoaXMucGxheWVycykge1xyXG4gICAgICAgICAgICBpZiAocGxheWVyLmlkID09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGxheWVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0KCkgOiBbYm9vbGVhbiwgc3RyaW5nXSB7XHJcbiAgICAgICAgLy8gTWFrZSB0aGUgQVBJIHJlcXVlc3QgdGhhdCBzdGFydHMgdGhlIGxvYmJ5XHJcbiAgICAgICAgcmV0dXJuIFt0cnVlLCAnJ107XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHVwbG9hZFNlY3Rpb24oKSA6IHZvaWQge1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7TG9iYnl9IGZyb20gXCIuL0xvYmJ5XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVWlNYW5hZ2VyIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgbG9iYnk6IExvYmJ5O1xyXG4gICAgXHJcbiAgICAvLyBIVE1MIEVsZW1lbnRzXHJcbiAgICBwcml2YXRlIHBsYXllcnNMaXN0OiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgZ2FtZVRpbWUgOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgYWxsb3dVcGxvYWRzOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgbG9iYnlJbWFnZTogSFRNTEltYWdlRWxlbWVudDtcclxuICAgIHByaXZhdGUgc3RhcnRMb2JieTogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHNlY3Rpb25zTGlzdDogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGdhbWVJbWFnZTogSFRNTEltYWdlRWxlbWVudDtcclxuICAgIHByaXZhdGUgaW1hZ2VVcGxvYWQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHVwbG9hZEltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBzdGl0Y2hlZEltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSByZXR1cm5Ub0xvYmJ5OiBIVE1MRWxlbWVudDtcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IobG9iYnkgOiBMb2JieSkge1xyXG4gICAgICAgIHRoaXMubG9iYnkgPSBsb2JieTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnBsYXllcnNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXllcnNMaXN0Jyk7XHJcbiAgICAgICAgdGhpcy5nYW1lVGltZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnYW1lVGltZScpO1xyXG4gICAgICAgIHRoaXMuYWxsb3dVcGxvYWRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsbG93VXBsb2FkcycpO1xyXG4gICAgICAgIHRoaXMubG9iYnlJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2JieUltYWdlJykgYXMgSFRNTEltYWdlRWxlbWVudDtcclxuICAgICAgICB0aGlzLnN0YXJ0TG9iYnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnRMb2JieScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc2VjdGlvbnNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlY3Rpb25zTGlzdCcpO1xyXG4gICAgICAgIHRoaXMuZ2FtZUltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWVJbWFnZScpIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5pbWFnZVVwbG9hZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZVVwbG9hZCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy51cGxvYWRJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGxvYWRJbWFnZScpIGFzIEhUTUxJbWFnZUVsZW1lbnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zdGl0Y2hlZEltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0aXRjaGVkSW1hZ2UnKSBhcyBIVE1MSW1hZ2VFbGVtZW50O1xyXG4gICAgICAgIHRoaXMucmV0dXJuVG9Mb2JieSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXR1cm5Ub0xvYmJ5Jyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5zdGFydExvYmJ5Lm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxvYmJ5LnN0YXJ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSgpIDogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgbG9iYnkgPSB0aGlzLmxvYmJ5O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuZ2FtZVRpbWUuaW5uZXJUZXh0ID0gdGhpcy50b01pbnV0ZXNBbmRTZWNvbmRzKGxvYmJ5LmdhbWVUaW1lKTtcclxuICAgICAgICB0aGlzLmFsbG93VXBsb2Fkcy5pbm5lclRleHQgPSBsb2JieS5hbGxvd0ltYWdlVXBsb2Fkcz8neWVzJzonbm8nO1xyXG4gICAgICAgIHRoaXMubG9iYnlJbWFnZS5zcmMgPSBsb2JieS5pbWFnZVVSTDtcclxuICAgICAgICB0aGlzLnN0YXJ0TG9iYnkuaGlkZGVuID0gIWxvYmJ5LmNhblN0YXJ0TG9iYnkoKTtcclxuICAgICAgICB0aGlzLmdhbWVJbWFnZS5zcmMgPSBsb2JieS5nYW1lLmltYWdlVVJMO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFVwZGF0ZSBwbGF5ZXJzIGxpc3RcclxuICAgICAgICB0aGlzLnBsYXllcnNMaXN0LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIGxvYmJ5LnBsYXllcnMuZm9yRWFjaChwbGF5ZXIgPT4ge1xyXG4gICAgICAgICAgICBsZXQgZWwgOiBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gICAgICAgICAgICBlbC5pbm5lclRleHQgPSBwbGF5ZXIubmFtZTtcclxuICAgICAgICAgICAgaWYgKHBsYXllci5pc0dhbWVNYXN0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2dhbWVNYXN0ZXInKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocGxheWVyLmlzWW91KSB7XHJcbiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCd5b3UnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnBsYXllcnNMaXN0LmFwcGVuZENoaWxkKGVsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBVcGRhdGUgc2VjdGlvbnNcclxuICAgICAgICBjb25zdCBzZWN0aW9ucyA9IGxvYmJ5LmdhbWUuc2VjdGlvbnM7XHJcbiAgICAgICAgdGhpcy5zZWN0aW9uc0xpc3QuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgc2VjdGlvbnMuZm9yRWFjaChzZWN0aW9uID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gICAgICAgICAgICBjb25zdCBwbGF5ZXIgPSBsb2JieS5nZXRQbGF5ZXIoc2VjdGlvbi5wbGF5ZXJJZCk7XHJcbiAgICAgICAgICAgIGVsLmlubmVyVGV4dCA9IGAke3BsYXllci5uYW1lfSAke3NlY3Rpb24uc3VibWl0dGVkPydzdWJtaXR0ZWQnOidub3Qgc3VibWl0dGVkJ31gO1xyXG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25zTGlzdC5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRvTWludXRlc0FuZFNlY29uZHMoc2Vjb25kcyA6IG51bWJlcikgOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IG1pbiA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwKTtcclxuICAgICAgICBjb25zdCBzZWMgPSBzZWNvbmRzIC0gNjAqbWluO1xyXG4gICAgICAgIHJldHVybiBgJHttaW59OmArYCR7c2VjfWAucGFkU3RhcnQoMiwgJzAnKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7TG9iYnl9IGZyb20gXCIuL0xvYmJ5XCI7XHJcbmltcG9ydCB7VWlNYW5hZ2VyfSBmcm9tIFwiLi9VaU1hbmFnZXJcIjtcclxuXHJcbmxldCBxdWVyeURpY3QgOiBhbnkgPSB7fVxyXG4vLyBAdHMtaWdub3JlIC0gdGhpcyBjb21lcyBmcm9tIHN0YWNrIG92ZXJmbG93LCBJIGRvbid0IGNhcmUgaG93IGl0IHdvcmtzXHJcbmxvY2F0aW9uLnNlYXJjaC5zdWJzdHIoMSkuc3BsaXQoXCImXCIpLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge3F1ZXJ5RGljdFtpdGVtLnNwbGl0KFwiPVwiKVswXV0gPSBpdGVtLnNwbGl0KFwiPVwiKVsxXX0pXHJcblxyXG5sZXQgbG9iYnlJZCA6IHN0cmluZyA9IHF1ZXJ5RGljdFtcImxcIl07XHJcblxyXG5jb25zdCBsb2JieSA9IG5ldyBMb2JieSgpO1xyXG5jb25zdCB1aU1hbmFnZXIgPSBuZXcgVWlNYW5hZ2VyKGxvYmJ5KTtcclxuXHJcbmxvYmJ5LnVwZGF0ZSh7XHJcbiAgICBwbGF5ZXJzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBuYW1lOiAnYm9iYnknLFxyXG4gICAgICAgICAgICBpZDogJzEyMzQnLFxyXG4gICAgICAgICAgICBpc0dhbWVNYXN0ZXI6IHRydWUsXHJcbiAgICAgICAgICAgIGlzWW91OiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5hbWU6ICdhbGV4JyxcclxuICAgICAgICAgICAgaWQ6ICc1Njc4JyxcclxuICAgICAgICAgICAgaXNHYW1lTWFzdGVyOiBmYWxzZSxcclxuICAgICAgICAgICAgaXNZb3U6IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgXSxcclxuICAgIGdhbWVPcHRpb25zIDoge1xyXG4gICAgICAgIGdhbWVUaW1lOiAzMDAwLFxyXG4gICAgICAgIGFsbG93SW1hZ2VVcGxvYWRzOiB0cnVlLFxyXG4gICAgICAgIGltYWdlU3BsaXQ6ICdob3Jpem9udGFsJyxcclxuICAgICAgICBpbWFnZVVSTDogJ2h0dHBzOi8vd3d3LmltYWdlLmNvbS9teUltYWdlLnBuZycsXHJcbiAgICB9LFxyXG4gICAgbG9iYnlPcHRpb25zOiB7XHJcbiAgICAgICAgbWF4UGxheWVyczogMTYsXHJcbiAgICAgICAgbG9iYnlMb2NrZWQ6IGZhbHNlXHJcbiAgICB9LFxyXG4gICAgZ2FtZVN0YXRlVXBkYXRlOiB7XHJcbiAgICAgICAgaWQ6ICdhc2RmMTIzJyxcclxuICAgICAgICBnYW1lT3B0aW9uczoge1xyXG4gICAgICAgICAgICBnYW1lVGltZTogMzAwMCxcclxuICAgICAgICAgICAgYWxsb3dJbWFnZVVwbG9hZHM6IHRydWUsXHJcbiAgICAgICAgICAgIGltYWdlU3BsaXQ6ICdob3Jpem9udGFsJyxcclxuICAgICAgICAgICAgaW1hZ2VVUkw6ICdodHRwczovL3d3dy5pbWFnZS5jb20vbXlJbWFnZS5wbmcnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGltZUNyZWF0aW9uOiBuZXcgRGF0ZSgpLmdldFVUQ1NlY29uZHMoKSxcclxuICAgICAgICB0aW1lRW5kOiBuZXcgRGF0ZSgpLmdldFVUQ1NlY29uZHMoKSArIDEwMDAsXHJcbiAgICAgICAgc2VjdGlvbnM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgeDogMCxcclxuICAgICAgICAgICAgICAgIHk6IDAsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogNDAwLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAzMDAsXHJcbiAgICAgICAgICAgICAgICBwbGF5ZXJJZDogJzEyMzQnLFxyXG4gICAgICAgICAgICAgICAgc3VibWl0dGVkOiB0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHg6IDAsXHJcbiAgICAgICAgICAgICAgICB5OiAzMDAsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogNDAwLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAzMDAsXHJcbiAgICAgICAgICAgICAgICBwbGF5ZXJJZDogJzU2NzgnLFxyXG4gICAgICAgICAgICAgICAgc3VibWl0dGVkOiBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgfVxyXG59KTtcclxudWlNYW5hZ2VyLnVwZGF0ZSgpOyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGVcbl9fd2VicGFja19yZXF1aXJlX18oNjA3KTtcbi8vIFRoaXMgZW50cnkgbW9kdWxlIHVzZWQgJ2V4cG9ydHMnIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbiJdLCJzb3VyY2VSb290IjoiIn0=